!function e(r,t,n){function o(a,l){if(!t[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};r[a][0].call(s.exports,function(e){var t=r[a][1][e];return o(t?t:e)},s,s.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){"use strict";var n=e("./dragularModule");n.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i=r.$eval(n.dragular)||o(n.dragular)||{};n.dragularModel?i=angular.extend({containersModel:r.$eval(n.dragularModel)},i):i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=r.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,r,t){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,t){"use strict";var n=e("./dragularModule");n.factory("dragularService",["$rootScope",function(e){function r(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[r](o[t],n),i[r](t,n)}function t(){return!1}function n(){return!0}function o(e){return e.width||e.right-e.left}function i(e){return e.height||e.bottom-e.top}function a(){return{}}function l(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function c(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function u(e){var r=b.classesCache[e];return r?r.lastIndex=0:b.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function s(e,r){var t=e.className;t.length?u(r).test(t)||(e.className+=" "+r):e.className=r}function d(e,r){e.className=e.className.replace(u(r)," ").trim()}function f(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function m(e,r){var t=f(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")>-1?void 0:t.originalEvent.touches[0][e.replace("client","page")]}function g(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.buttons)return e.buttons;if(void 0!==e.which)return e.which;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function p(e){return e.parentNode===document?null:e.parentNode}function v(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||h(e)}function h(e){return e?"false"===e.contentEditable?!1:"true"===e.contentEditable?!0:h(p(e)):!1}function y(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function x(e,r,t){e&&(b.extra=t,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var b={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},M=function(u,f){function h(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function M(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:h(r);e.forEach(function(e){angular.forEach(ie.nameSpace,function(r){var t;t=b.containers[r].indexOf(e),b.containers[r].splice(t,1),b.containersCtx[r].splice(t,1)})})})}function C(e){var t=e?"off":"on";r(ne,t,"mouseup",D),u.forEach(function(e){r(e,"on","mousedown",O)})}function S(e){var t=e?"off":"on";r(ne,t,"mousemove",I)}function E(e){var t=e?"off":"on";r(ne,t,"selectstart",Y),r(ne,t,"click",Y),r(ne,t,"touchmove",Y)}function X(){C(!0),M(u),D({})}function Y(e){b.grabbed&&e.preventDefault()}function O(e){if(e=e||window.event,b.moveX=e.clientX,b.moveY=e.clientY,1===g(e)&&!e.metaKey&&!e.ctrlKey){var r=T(e.target);r&&r.item&&(b.grabbed=r,S(),"mousedown"===e.type&&(v(r.item)?r.item.focus():e.preventDefault()))}}function I(e){if(b.grabbed&&!ae.dragging){if(0===g(e))return void D({});if(!e.clientX||e.clientX!==b.moveX||!e.clientY||e.clientY!==b.moveY){if(ie.ignoreInputTextSelection){var r=m("clientX",e),t=m("clientY",e),n=re.elementFromPoint(r,t);if(v(n))return}var o=b.grabbed;if(S(!0),E(),A(),w(o),!ie.direction&&p(b.sourceItem)){var i=b.sourceItem.parentNode,a=i.offsetHeight,l=i.offsetWidth,c=b.sourceItem.clientHeight,u=b.sourceItem.clientWidth;ie.direction=l/u>a/c?"horizontal":"vertical"}var d=V(b.sourceItem);b.offsetX=m("pageX",e)-d.left,b.offsetY=m("pageY",e)-d.top,b.clientX=m("clientX",e),b.clientY=m("clientY",e),ie.boundingBox&&(b.offsetXr=m("pageX",e)-d.right,b.offsetYb=m("pageY",e)-d.bottom),e.preventDefault(),s(b.item,ie.classes.transit),z(),b.mirror.style.left=b.clientX-b.offsetX+"px",b.mirror.style.top=b.clientY-b.offsetY+"px",W(e)}}}function T(e){if(!ae.dragging||!b.mirror){for(var r=e;p(e)&&!ee(p(e));){if(ie.invalid(e,r))return;if(e=p(e),!e)return}var t=p(e);if(t&&!ie.invalid(e,r)&&ie.moves(e,t,r,l(e)))return{item:e,source:t}}}function N(e){var r=T(e);r&&w(r)}function w(e){b.sourceItem=b.item=e.item,b.source=e.source,b.initialSibling=b.currentSibling=l(e.item),G(e.item,e.source)?(b.item=e.item.cloneNode(!0),b.copy=!0,ie.scope&&ie.scope.$emit("dragularcloned",b.item,e.item)):b.copy=!1;var r=u.indexOf(e.source);return b.sourceModel=ie.containersModel[r],b.initialIndex=y(e.item,e.source),ae.dragging=!0,ie.scope&&ie.scope.$emit("dragulardrag",b.sourceItem,b.source),!0}function B(){return!1}function A(){ae.dragging&&b.item&&H(b.item,p(b.item))}function $(){b.grabbed=!1,S("remove"),E("remove")}function D(e){if($(),ae.dragging){e=e||window.event,b.clientX=m("clientX",e),b.clientY=m("clientY",e);var r=Z(b.mirror,b.clientX,b.clientY),t=q(r,b.clientX,b.clientY);t&&(b.copy&&ie.copySortSource||!b.copy||t!==b.source)?H(b.item,t):ie.removeOnSpill?j():k(),b.target=null,b.lastElementBehindCursor&&x(b.lastElementBehindCursor,b.dragOverEvents.dragularrelease,r),ie.scope&&ie.scope.$emit("dragularrelease",b.item,b.source)}}function H(r,t){function n(){ie.scope&&(R(t)?ie.scope.$emit("dragularcancel",r,b.source,b.sourceModel,b.initialIndex):ie.scope.$emit("dragulardrop",r,t,b.source,b.sourceModel,b.initialIndex,b.targetModel,o))}b.copy&&ie.copySortSource&&t===b.source&&p(r)&&r.parentNode.removeChild(b.sourceItem);var o=y(r,t);if(b.sourceModel&&!R(t)){var i=r;e.$applyAsync(function(){t===b.source?b.sourceModel.splice(o,0,b.sourceModel.splice(b.initialIndex,1)[0]):(b.dropElmModel=b.copy?angular.copy(b.sourceModel[b.initialIndex]):b.sourceModel[b.initialIndex],b.isContainerModel?b.targetModel=b.isContainerModel:b.targetModel=b.targetCtx.m,t.removeChild(i),b.copy||b.sourceModel.splice(b.initialIndex,1),b.targetModel.splice(o,0,b.dropElmModel)),p(r)&&r.parentNode.removeChild(r),n(),L()})}else n(),L()}function j(){if(ae.dragging){var r=p(b.item);r&&r.removeChild(b.item),b.sourceModel&&e.$applyAsync(function(){b.sourceModel.splice(b.initialIndex,1),L()}),ie.scope&&ie.scope.$emit(b.copy?"dragularcancel":"dragularremove",b.item,r,b.sourceModel,b.initialIndex),b.sourceModel||L()}}function k(e){if(ae.dragging){var r=arguments.length>0?e:ie.revertOnSpill,t=p(b.item),n=R(t);n||b.copy||!r||b.source.insertBefore(b.item,b.initialSibling),!b.sourceModel||b.copy||r?ie.scope&&(n||r)&&ie.scope.$emit("dragularcancel",b.item,b.source):H(b.item,t),(!b.sourceModel||b.copy||r||n)&&L()}}function L(){$(),K(),b.item&&d(b.item,ie.classes.transit),ae.dragging=!1,ie.removeOnSpill===!0&&F(),ie.scope&&(b.lastDropTarget&&ie.scope.$emit("dragularout",b.item,b.lastDropTarget,b.source),ie.scope.$emit("dragulardragend",b.item)),b.source=b.item=b.sourceItem=b.initialSibling=b.currentSibling=b.sourceModel=null,b.initialIndex=b.currentIndex=b.lastDropTarget=b.isContainerModel=b.targetModel=null,b.dropElmModel=b.targetCtx=b.copy=b.moveX=b.moveY=null}function R(e,r){var t=r||(b.mirror?b.currentSibling:l(b.item));return e===b.source&&t===b.initialSibling}function q(e,r,t){function n(){var n=!1;if(ee(o)){for(var i=_(o,e),a=J(o,i,r,t),l=R(o,a),c=ie.nameSpace.length;c--;){if(-1!==b.containers[ie.nameSpace[c]].indexOf(o)){b.targetCtx=b.containersCtx[ie.nameSpace[c]][b.containers[ie.nameSpace[c]].indexOf(o)];break}b.targetCtx||(b.targetCtx=b.containersCtx.dragularCommon[b.containers.dragularCommon.indexOf(o)])}n=l||b.targetCtx.o.accepts(b.item,o,b.source,a,b.sourceModel,b.initialIndex)&&ie.canBeAccepted(b.item,o,b.source,a,b.sourceModel,b.initialIndex),b.target!==o&&(b.target=o)}return n}for(var o=e;o&&!n();)o=p(o);return o}function W(e){function r(e){ie.scope&&ie.scope.$emit("dragular"+e,b.item,b.lastDropTarget,b.source),ie.removeOnSpill===!0&&("over"===e?P():F())}function t(){f&&r("over")}function n(){b.lastDropTarget&&r("out")}if(b.mirror){e=e||window.event,b.clientX=m("clientX",e),b.clientY=m("clientY",e);var o,i,a,c=b.clientX-b.offsetX,u=b.clientY-b.offsetY;ie.boundingBox&&(o=m("pageX",e),i=m("pageY",e),a=V(ie.boundingBox)),ie.lockY||(!ie.boundingBox||o>a.left+b.offsetX&&o<a.right+b.offsetXr?b.mirror.style.left=c+"px":ie.boundingBox&&(o<a.left+b.offsetX?b.mirror.style.left=b.clientX-(o-a.left)+"px":b.mirror.style.left=b.clientX-b.mirrorWidth-(o-a.right)+"px")),ie.lockX||(!ie.boundingBox||i>a.top+b.offsetY&&i<a.bottom+b.offsetYb?b.mirror.style.top=u+"px":ie.boundingBox&&(i<a.top+b.offsetY?b.mirror.style.top=b.clientY-(i-a.top)+"px":b.mirror.style.top=b.clientY-b.mirrorHeight-(i-a.bottom)+"px"));var s=Z(b.mirror,b.clientX,b.clientY),d=q(s,b.clientX,b.clientY),f=d!==b.lastDropTarget;if(s!==b.lastElementBehindCursor&&(x(s,b.dragOverEvents.dragularenter,!!d),b.lastElementBehindCursor&&x(b.lastElementBehindCursor,b.dragOverEvents.dragularleave,s),b.lastElementBehindCursor=s),f&&(n(),b.lastDropTarget=d,t()),d===b.source&&b.copy&&!ie.copySortSource)return void(p(b.item)&&b.item.parentNode.removeChild(b.item));var g,v=_(d,s);if(null!==v)g=J(d,v,b.clientX,b.clientY);else{if(ie.revertOnSpill!==!0||b.copy)return void(b.copy&&p(b.item)&&b.item.parentNode.removeChild(b.item));g=b.initialSibling,d=b.source}(null===g||g!==b.item&&g!==l(b.item)&&g!==b.currentSibling)&&(b.currentSibling=g,d.insertBefore(b.item,g),ie.scope&&ie.scope.$emit("dragularshadow",b.item,d))}}function P(){d(b.item,ie.classes.hide)}function F(){ae.dragging&&s(b.item,ie.classes.hide)}function U(e){if(b.target){var r=b.target.scrollTop;b.target.scrollTop+=e.deltaY,r!==b.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function z(){if(!b.mirror){var e=b.sourceItem.getBoundingClientRect();b.mirror=b.sourceItem.cloneNode(!0),b.mirrorWidth=e.width,b.mirrorHeight=e.height,b.mirror.style.width=o(e)+"px",b.mirror.style.height=i(e)+"px",d(b.mirror,ie.classes.transit),s(b.mirror,ie.classes.mirror),ie.mirrorContainer.appendChild(b.mirror),r(ne,"on","mousemove",W),s(te,ie.classes.unselectable),r(b.mirror,"on","wheel",U),ie.scope&&ie.scope.$emit("dragularcloned",b.mirror,b.sourceItem)}}function K(){b.mirror&&(d(te,ie.classes.unselectable),r(ne,"off","mousemove",W),r(b.mirror,"off","wheel",U),p(b.mirror)&&b.mirror.parentNode.removeChild(b.mirror),b.mirror=null)}function _(e,r){for(var t=r;t!==e&&p(t)!==e;)t=p(t);return t===ne?null:t}function J(e,r,t,n){function a(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),s&&i.left>t)return o;if(!s&&i.top>n)return o}return null}function c(){var e=r.getBoundingClientRect();return u(s?t>e.left+o(e)/2:n>e.top+i(e)/2)}function u(e){return e?l(r):r}var s="horizontal"===ie.direction,d=r!==e?c():a();return d}function G(e,r){return"boolean"==typeof ie.copy?ie.copy:ie.copy(e,r)}function Q(e,r){return"undefined"!=typeof window[r]?window[r]:ne.clientHeight?ne[e]:te[e]}function V(e){var r=e.getBoundingClientRect(),t=Q("scrollTop","pageYOffset"),n=Q("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function Z(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+ie.classes.hide,n=re.elementFromPoint(r,t),o.className=i,n}1!==arguments.length||Array.isArray(u)||angular.isElement(u)||u[0]||"string"==typeof u?"string"==typeof u&&(u=document.querySelectorAll(u)):(f=u,u=[]);var ee,re=document,te=re.body,ne=re.documentElement,oe={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ie={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:oe,containers:!1,moves:n,accepts:n,canBeAccepted:n,isContainer:t,copy:!1,invalid:B,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:a};c(ie.boundingBox)||(ie.boundingBox=null),f&&f.classes&&(angular.extend(oe,f.classes),angular.extend(f.classes,oe)),angular.extend(ie,f),ie.mirrorContainer||(ie.mirrorContainer=re.body),u=ie.containers||u||[],u=h(u),ie.containersModel?ie.containersModel=Array.isArray(ie.containersModel[0])?ie.containersModel:[ie.containersModel]:ie.containersModel=[],ie.nameSpace||(ie.nameSpace=["dragularCommon"]),Array.isArray(ie.nameSpace)||(ie.nameSpace=[ie.nameSpace]),ie.nameSpace.forEach(function(e){b.containers[e]||(b.containers[e]=[],b.containersCtx[e]=[]);for(var r=u.length,t=b.containers[e].length,n=0;r>n;n++)b.containers[e][n+t]=u[n],b.containersCtx[e][n+t]={o:ie,m:ie.containersModel[n]}}),C(),angular.forEach(ie.dragOverEventNames,function(e){re.createEvent?(b.dragOverEvents[e]=re.createEvent("HTMLEvents"),b.dragOverEvents[e].initEvent(e,!0,!0)):(b.dragOverEvents[e]=re.createEventObject(),b.dragOverEvents[e].eventType=e)}),ee=function(e){if(!e)return!1;for(var r=ie.nameSpace.length;r--;)if(-1!==b.containers[ie.nameSpace[r]].indexOf(e))return!0;return ie.isContainer(e)?(b.isContainerModel=ie.isContainerModel(e),!0):(b.isContainerModel=null,!1)};var ae={containers:b.containers,containersCtx:b.containersCtx,isContainer:ee,start:N,end:A,cancel:k,remove:j,destroy:X,dragging:!1};return ae};return M.cleanEnviroment=function(){b.classesCache={},b.containersCtx={},b.containers={},b.mirror=void 0},M.shared=b,M}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map
